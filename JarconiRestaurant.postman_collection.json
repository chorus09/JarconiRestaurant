{
  "info": {
    "name": "JarconiRestaurant API – Admin & Client checks",
    "_postman_id": "6f5d0b4e-4f15-4a0f-8f5e-jarconi-1757504402",
    "description": "Postman collection for quick manual checks of the JarconiRestaurant Web API.\nSet {{baseUrl}} and {{token}} variables before running protected endpoints.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Auth – Register (Client)",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "url": {
          "raw": "{{baseUrl}}/api/auth/register",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "auth",
            "register"
          ]
        },
        "body": {
          "mode": "raw",
          "raw": "{\n  \"email\": \"{{clientEmail}}\",\n  \"password\": \"{{clientPassword}}\"\n}"
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status 200\", ()=> pm.response.to.have.status(200));",
              "const data = pm.response.json();",
              "pm.environment.set(\"token\", data.token);",
              "pm.collectionVariables.set(\"token\", data.token);"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "Auth – Login",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "url": {
          "raw": "{{baseUrl}}/api/auth/login",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "auth",
            "login"
          ]
        },
        "body": {
          "mode": "raw",
          "raw": "{\n  \"email\": \"{{clientEmail}}\",\n  \"password\": \"{{clientPassword}}\"\n}"
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status 200\", ()=> pm.response.to.have.status(200));",
              "const data = pm.response.json();",
              "pm.environment.set(\"token\", data.token);",
              "pm.collectionVariables.set(\"token\", data.token);",
              "pm.collectionVariables.set(\"clientUserId\", data.userId);"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "Auth – Me",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Authorization",
            "value": "Bearer {{token}}"
          }
        ],
        "url": {
          "raw": "{{baseUrl}}/api/auth/me",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "auth",
            "me"
          ]
        }
      }
    },
    {
      "name": "Menu – Create Category (Admin)",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Authorization",
            "value": "Bearer {{token}}"
          }
        ],
        "url": {
          "raw": "{{baseUrl}}/api/menu/categories",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "menu",
            "categories"
          ]
        },
        "body": {
          "mode": "raw",
          "raw": "{\n  \"name\": \"Pizzas\",\n  \"sortOrder\": 1\n}"
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status 201\", ()=> pm.response.to.have.status(201));",
              "const data = pm.response.json();",
              "pm.collectionVariables.set(\"categoryId\", data.id || data.Id);"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "Menu – Create Item (Admin)",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Authorization",
            "value": "Bearer {{token}}"
          }
        ],
        "url": {
          "raw": "{{baseUrl}}/api/menu/items",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "menu",
            "items"
          ]
        },
        "body": {
          "mode": "raw",
          "raw": "{\n  \"categoryId\": \"{{categoryId}}\",\n  \"title\": \"Margherita\",\n  \"description\": \"Tomato, mozzarella, basil\",\n  \"price\": 8.5,\n  \"isAvailable\": true,\n  \"isPublished\": true,\n  \"sortOrder\": 1\n}"
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status 201\", ()=> pm.response.to.have.status(201));",
              "const data = pm.response.json();",
              "pm.collectionVariables.set(\"menuItemId\", data.id || data.Id);"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "Menu – Public Get",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "url": {
          "raw": "{{baseUrl}}/api/menu",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "menu"
          ]
        }
      }
    },
    {
      "name": "News – Create (Admin)",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Authorization",
            "value": "Bearer {{token}}"
          }
        ],
        "url": {
          "raw": "{{baseUrl}}/api/news",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "news"
          ]
        },
        "body": {
          "mode": "raw",
          "raw": "{\n  \"title\": \"Grand Opening\",\n  \"excerpt\": \"We open a new hall\",\n  \"content\": \"Longer markdown content here...\"\n}"
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status 201\", ()=> pm.response.to.have.status(201));",
              "const data = pm.response.json();",
              "pm.collectionVariables.set(\"newsId\", data.id || data.Id);",
              "pm.collectionVariables.set(\"newsSlug\", data.slug || data.Slug);"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "News – Publish (Admin)",
      "request": {
        "method": "PATCH",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Authorization",
            "value": "Bearer {{token}}"
          }
        ],
        "url": {
          "raw": "{{baseUrl}}/api/news/{{newsId}}/publish",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "news",
            "{{newsId}}",
            "publish"
          ]
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('Status 200', ()=> pm.response.to.have.status(200));"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "News – Public List",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "url": {
          "raw": "{{baseUrl}}/api/news",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "news"
          ]
        }
      }
    },
    {
      "name": "News – Public Get by Slug",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "url": {
          "raw": "{{baseUrl}}/api/news/{{newsSlug}}",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "news",
            "{{newsSlug}}"
          ]
        }
      }
    },
    {
      "name": "Reservations – Create (Client/Admin)",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Authorization",
            "value": "Bearer {{token}}"
          }
        ],
        "url": {
          "raw": "{{baseUrl}}/api/reservations",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "reservations"
          ]
        },
        "body": {
          "mode": "raw",
          "raw": "{\n  \"tableNumber\": 1,\n  \"dateTimeStartUtc\": \"2099-01-01T12:00:00Z\",\n  \"durationMin\": 90,\n  \"partySize\": 2,\n  \"comment\": \"Window seat, please\"\n}"
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status 201\", ()=> pm.response.to.have.status(201));",
              "const data = pm.response.json();",
              "pm.collectionVariables.set(\"reservationId\", data.id || data.Id);"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "Reservations – My (Client/Admin)",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Authorization",
            "value": "Bearer {{token}}"
          }
        ],
        "url": {
          "raw": "{{baseUrl}}/api/reservations/my",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "reservations",
            "my"
          ]
        }
      }
    },
    {
      "name": "Reservations – GetById",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Authorization",
            "value": "Bearer {{token}}"
          }
        ],
        "url": {
          "raw": "{{baseUrl}}/api/reservations/{{reservationId}}",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "reservations",
            "{{reservationId}}"
          ]
        }
      }
    },
    {
      "name": "Reservations – Update",
      "request": {
        "method": "PUT",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Authorization",
            "value": "Bearer {{token}}"
          }
        ],
        "url": {
          "raw": "{{baseUrl}}/api/reservations/{{reservationId}}",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "reservations",
            "{{reservationId}}"
          ]
        },
        "body": {
          "mode": "raw",
          "raw": "{\n  \"tableNumber\": 1,\n  \"dateTimeStartUtc\": \"2099-01-01T13:00:00Z\",\n  \"durationMin\": 90,\n  \"partySize\": 3,\n  \"comment\": \"Change time by +1h\"\n}"
        }
      }
    },
    {
      "name": "Reservations – Confirm (Admin)",
      "request": {
        "method": "PATCH",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Authorization",
            "value": "Bearer {{token}}"
          }
        ],
        "url": {
          "raw": "{{baseUrl}}/api/reservations/{{reservationId}}/confirm",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "reservations",
            "{{reservationId}}",
            "confirm"
          ]
        }
      }
    },
    {
      "name": "Reservations – Cancel",
      "request": {
        "method": "DELETE",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Authorization",
            "value": "Bearer {{token}}"
          }
        ],
        "url": {
          "raw": "{{baseUrl}}/api/reservations/{{reservationId}}",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "reservations",
            "{{reservationId}}"
          ]
        }
      }
    },
    {
      "name": "Security – Try Admin without token (should 401)",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "url": {
          "raw": "{{baseUrl}}/api/menu/categories",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "menu",
            "categories"
          ]
        },
        "body": {
          "mode": "raw",
          "raw": "{\n  \"name\": \"ShouldFail\",\n  \"sortOrder\": 99\n}"
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('Expect 401/403', ()=> pm.response.code===401 || pm.response.code===403);"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "Security – Public GET without token (should 200)",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "url": {
          "raw": "{{baseUrl}}/api/menu",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "menu"
          ]
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('Expect 200', ()=> pm.response.to.have.status(200));"
            ],
            "type": "text/javascript"
          }
        }
      ]
    }
  ],
  "variable": [
    {
      "key": "baseUrl",
      "value": "https://localhost:4003",
      "type": "string"
    },
    {
      "key": "token",
      "value": "",
      "type": "string"
    },
    {
      "key": "clientEmail",
      "value": "client@example.com",
      "type": "string"
    },
    {
      "key": "clientPassword",
      "value": "P@ssw0rd!123",
      "type": "string"
    },
    {
      "key": "newsId",
      "value": "",
      "type": "string"
    },
    {
      "key": "newsSlug",
      "value": "",
      "type": "string"
    },
    {
      "key": "categoryId",
      "value": "",
      "type": "string"
    },
    {
      "key": "menuItemId",
      "value": "",
      "type": "string"
    },
    {
      "key": "reservationId",
      "value": "",
      "type": "string"
    }
  ]
}